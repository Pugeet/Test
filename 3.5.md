# sqlmap

## os  shell



### mysql数据库，php->into outfile

1. 要求secure_file_priv=
2. 要求当前数据库必须有写文件的权限
3. 必须已知web应用的绝对权限



**注意**：上传2个文件

- 小马，可有一个上传点
- 命令执行木马

---



### mssql数据库 （SQL server）

引用xp_cmd的存储过程



# XSS

攻击**客户端**的手段，

#### **原理：**

利用了后端不认识前端代码，从而直接把前端代码当作字符串输出到前端。

## 1，反射型

- 灵活
- 不在服务器保存，（很难发现）隐蔽性高
- 传播困难



## 2，存储型

- 不那么灵活
- 传播方便
- 在服务器保存

## **3，特点：**

只要用户通过web应用参数控制浏览器时间触发的地方

## 4，防御：

1，关键字过滤

2，html标签实体化



# 文件上传：

**能够直接造成主机失陷**

黑名单绕过常用后缀：

- phtml、php3、php5、php、phtm、phps、htaccess（只能在apache）

![image-20250306150148822](https://gitee.com/PUqicnda/img/raw/master/20250306150156022.png)

代码上的缺陷，操作系统的特性，中间件的缺陷

在windows中，如果文件名最后一个为 ‘. ’或者空白，那么保存文件时会自动清除掉



upload-第六关

![image-20250306152205193](https://gitee.com/PUqicnda/img/raw/master/20250306152205269.png)



## 防御

1，**关键字匹配**

优点：结构简单，

缺点：匹配机制过于严格会造成误伤，过于宽松会被绕过。

2，**预处理**

修改内容较为负责，且很难使用动态调整sql语句

不能处理like查询问题



#### 使用位置

​	**关键字匹配**：文章的搜索处、针对于非it技术的展示内容德一切相关查询处，或者开发框架。存在非常大改动的地方。

​	**预处理**：登录、固定式的sql查询、





# 相关学习链接（一定要看完）

https://blog.csdn.net/likinguuu/article/details/136520040

https://www.cnblogs.com/Mast1n/p/17778123.html

https://www.cnblogs.com/r00tgrok/p/SQL_Injection_Bypassing_WAF_And_Evasion_Of_Filter.html

https://unothing.github.io/posts/Mysql-blind-injection/











3.5作业

安装两个靶场并闯关

1，upload

2，



3.6作业

1，如果

2，查找nginx能够实现.htaccess功能的文件及文件写法

3，



